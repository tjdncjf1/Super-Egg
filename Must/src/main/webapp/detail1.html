<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery.getJSON demo</title>
  <style>
  img {
    height: 100px;
    float: left;
  }
  </style>
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
 <!--   <script src="xml2json.js"></script>  -->
</head>
<body>
 
<div id="images"></div>

<script>
$(function(){
  $("#searchButton").click(function() {
      var keyword = $("#searchValue").val();
       
      if(!keyword) {
          alert("검색어를 입력하세요.");
          return false;
      }
       
      // proxy에 전달할 URL
      var proxy_url = "http://openapi.naver.com/search?";
          proxy_url += "key=c1b406b32dbbbbeee5f2a36ddc14067f";
          proxy_url += "&target=shop";
          proxy_url += "&query="+ keyword;
       console.log(encodeURIComponent(proxy_url));
          
      $.ajax({
          url: "proxy.jsp",
          type: "get",
          data: {"url" : proxy_url},
          dataType: "xml",
          /* contentType: "application/x-www-form-urlencoded; charset=UTF-8", */
          timeout:30000,
          success: function(data){
              $(data).find("item").each(function(){
                   
                  var title = $(this).find("title").text();
                  var link = $(this).find("link").text();
                  var pubDate = $(this).find("pubDate").text();
                  var maker = $(this).find("maker").text();
                  var image = $(this).find("image").text();
                  var type = $(this).find("type").text();
                   
                  var html = "<li>";
                  html += "<a href='" + link + "'>";
                  html += "<img src='" + image + "'/>";
                  html += "<h2>" + title + "<h2>";
                  html += "<p>" + maker + "/" + pubDate + "</p>";
                  html += "</a>";                         
                  html += "</li>";
                   
                  $("#result").empty(html);
              }); 
              
          
              
          },
           
          error: function(xhr, message, errorThrown){
              var msg = xhr.status + " / " + message + " / " + errorThrown;
               
              alert(msg);
               
          }
      });
  });
});
</script>
 <input type="search" id="searchValue">
    <input type="button" value="검색" id="searchButton">
</body>
</html>




